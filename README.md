# turntable

 A turntable webapp

## TODO

- [ ] `Animate`类
  - [ ] 实现
  - [ ] 基于`window.requestAnimationFrame()`和`performance.now()`的动画定时
  - [ ] 异步执行
- [ ] `Event`类
  - [ ] 实现
  - [ ] 使用`altThis`参数解决`this`混乱问题
- [ ] `Chooser`类
  - [ ] 对于出率过高/过低的概率补偿
- [ ] UI
  - [ ] 优化转盘动画
    - [ ] 基于不均匀随机算法的转盘偏移
    - [ ] 实现跳至下一个选项的动画(不影响结果)
    - [x] 显示选项边界
    - [x] 被选中的选项发光
      - 注：这将使turn函数运行时间变得过长，在`Animate`类完善前暂不启用
- [ ] 功能更新
  - [ ] 选项浏览
    - [ ] 增加`contentMenu`，以支持浏览页面编辑
      - [ ] 左键也可以触发`contentMenu`
      - [ ] 拖动可以选中多个选项
        - 注：使用触控拖动时仍是拖动页面
      - [ ] 按住<kbd>Ctrl</kbd>以多选
  - [ ] Electron版
    - [ ] CSS悬浮窗适配
  - [ ] 完整的触控支持
  - [ ] 设置
    - [ ] 名单数据库
    - [ ] 复选框设置项：是否启用仿真动画
    - [ ] 在选项前加`-`以默认排除选项
    - [ ] `textarea`内容不再基于`Wheel.itemList`生成，独立保存至`textarea`，并在导出时一并输出
    - [ ] 重新设计UI
      - [ ] PC中不占据全屏，改为侧栏设计
      - [ ] 使设置页可滚动
      - [ ] 按钮容器改为`absolute`定位，脱离文档流固定于设置页底部
      - [ ] `textarea`自适应高度
- [ ] 代码质量
  - [ ] 完善类初始化代码
  - [ ] 优化类
    - [ ] 任务A:为每个函数和类确定功能边界
    - [ ] 任务B:建立相关文档
    - [ ] 任务C:并统一变量命名规则
    - [ ] 任务D:完成重构并移至`libV2.js`
    - [ ] Main
      - [ ] 任务A
      - [ ] 任务B
      - [ ] 任务C
      - [ ] 任务D
    - [ ] Settings
      - [ ] 任务A
      - [ ] 任务B
      - [ ] 任务C
      - [ ] 任务D
    - [ ] Chooser
      - [ ] 任务A
      - [ ] 任务B
      - [ ] 任务C
      - [ ] 任务D
    - [ ] Wheel
      - [ ] 任务A
      - [ ] 任务B
      - [ ] 任务C
      - [ ] 任务D
    - [ ] Animate
      - [ ] 任务A
      - [ ] 任务B
      - [x] 任务C
      - [x] 任务D
    - [ ] Event
      - [ ] 任务A
      - [ ] 任务B
      - [ ] 任务C
      - [ ] 任务D
    - [ ] Tools
      - [ ] 任务A
      - [ ] 任务B
      - [ ] 任务C
      - [ ] 任务D
  - [ ] `Log`类
    - [ ] 将`Tools`类中的自检函数移动至`Log`类
    - [ ] 完善自检机制
    - [ ] 完善日志机制
  - [ ] 挑战
    - [ ] 实现多个轮盘互不干扰同时运行
- [ ] i18n
  - [ ] 完善英语UI文本

## 已知问题

- [ ] 设置页初始化时不会初始化动画时长`<label>`标签内容
- [ ] 启用仿真动画时，转至最后一格时动画不稳定
